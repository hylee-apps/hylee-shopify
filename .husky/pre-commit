#!/usr/bin/env sh

# Run linting and formatting checks before commit
echo "ğŸ” Running pre-commit checks..."

# Run Shopify Theme Check (Liquid theme)
echo "ğŸ›ï¸  Running Shopify Theme Check..."
pnpm theme-check || exit 1

# Run Prettier check
echo "ğŸ’… Checking code formatting..."
pnpm format:check || exit 1

# Run Hydrogen typecheck if hydrogen files changed
if git diff --cached --name-only | grep -q '^hydrogen/'; then
  echo "âš›ï¸  Running Hydrogen typecheck..."
  cd hydrogen && pnpm typecheck || exit 1
  cd ..
fi

# Validate project structure
echo "ğŸ“‚ Validating project structure..."
pnpm validate:structure || exit 1

echo "âœ… Pre-commit checks passed!"
