{% comment %}
  Customer Registration Section
  Pixel-perfect match to React SignUp component
{% endcomment %}

{{ 'section-customer-register.css' | asset_url | stylesheet_tag }}

<div class="customer-register min-h-screen bg-gradient-to-b from-slate-50 to-white">
  {%- comment %-%} Header {%- endcomment -%}
  <header class="customer-register__header">
    <div class="customer-register__header-inner">
      <a href="{{ routes.root_url }}" class="customer-register__logo">
        {% if section.settings.logo %}
          <img src="{{ section.settings.logo | image_url: width: 28 }}" alt="{{ shop.name }}" width="28" height="28" class="customer-register__logo-img">
        {% else %}
          <div class="customer-register__logo-placeholder">H</div>
        {% endif %}
        <span class="customer-register__logo-text">{{ shop.name }}</span>
      </a>
      <div class="customer-register__header-actions">
        <span class="customer-register__signin-prompt">Already have an account?</span>
        <a href="{{ routes.account_login_url }}" class="customer-register__signin-btn">
          Sign In
        </a>
      </div>
    </div>
  </header>

  <div class="customer-register__container">
    <div class="customer-register__grid">
      {%- comment %-%} Left Side - Sign Up Form {%- endcomment -%}
      <div class="customer-register__form-wrapper">
        <div class="customer-register__form-header">
          <h1 class="customer-register__title">Create Your Account</h1>
          <p class="customer-register__subtitle">Join {{ shop.name }} to access exclusive B2B pricing and features</p>
        </div>

        {%- comment %-%} Social Login Options {%- endcomment -%}
        <div class="customer-register__social-buttons">
          <button type="button" class="customer-register__social-btn customer-register__social-btn--google">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M18.1713 8.36791H17.5001V8.33325H10.0001V11.6666H14.7096C14.0225 13.6069 12.1763 14.9999 10.0001 14.9999C7.23882 14.9999 5.00007 12.7612 5.00007 9.99992C5.00007 7.23867 7.23882 4.99992 10.0001 4.99992C11.2746 4.99992 12.4342 5.48075 13.3171 6.26617L15.6742 3.90909C14.1859 2.52217 12.1951 1.66659 10.0001 1.66659C5.39798 1.66659 1.66675 5.39784 1.66675 9.99992C1.66675 14.602 5.39798 18.3333 10.0001 18.3333C14.6022 18.3333 18.3334 14.602 18.3334 9.99992C18.3334 9.44117 18.2759 8.89575 18.1713 8.36791Z" fill="#FFC107"/>
              <path d="M2.62756 6.12117L5.36548 8.129C6.10631 6.29484 7.90048 4.99984 10.0001 4.99984C11.2747 4.99984 12.4343 5.48067 13.3172 6.26609L15.6743 3.909C14.186 2.52209 12.1951 1.6665 10.0001 1.6665C6.79923 1.6665 4.02339 3.47384 2.62756 6.12117Z" fill="#FF3D00"/>
              <path d="M10.0001 18.3333C12.1526 18.3333 14.1084 17.5095 15.5868 16.17L13.0084 13.9875C12.1433 14.6452 11.0859 15.0008 10.0001 15C7.83259 15 5.99176 13.6179 5.29843 11.6891L2.58426 13.7829C3.96051 16.4816 6.76134 18.3333 10.0001 18.3333Z" fill="#4CAF50"/>
              <path d="M18.1713 8.36795H17.5V8.33328H10V11.6666H14.7096C14.3809 12.5902 13.7889 13.3972 13.0071 13.9879L13.0084 13.9871L15.5867 16.1696C15.4046 16.3354 18.3333 14.1666 18.3333 9.99995C18.3333 9.44162 18.2758 8.89578 18.1713 8.36795Z" fill="#1976D2"/>
            </svg>
            Continue with Google
          </button>
          <div class="customer-register__social-buttons-row">
            <button type="button" class="customer-register__social-btn customer-register__social-btn--facebook">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M20 10C20 4.47715 15.5229 0 10 0C4.47715 0 0 4.47715 0 10C0 14.9912 3.65684 19.1283 8.4375 19.8785V12.8906H5.89844V10H8.4375V7.79688C8.4375 5.29063 9.93047 3.90625 12.2146 3.90625C13.3084 3.90625 14.4531 4.10156 14.4531 4.10156V6.5625H13.1922C11.95 6.5625 11.5625 7.3334 11.5625 8.125V10H14.3359L13.8926 12.8906H11.5625V19.8785C16.3432 19.1283 20 14.9912 20 10Z" fill="#1877F2"/>
              </svg>
              Facebook
            </button>
            <button type="button" class="customer-register__social-btn customer-register__social-btn--linkedin">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M18.5195 0H1.47656C0.660156 0 0 0.644531 0 1.44141V18.5547C0 19.3516 0.660156 20 1.47656 20H18.5195C19.3359 20 20 19.3516 20 18.5586V1.44141C20 0.644531 19.3359 0 18.5195 0ZM5.93359 17.043H2.96484V7.49609H5.93359V17.043ZM4.44922 6.19531C3.49609 6.19531 2.72656 5.42578 2.72656 4.47656C2.72656 3.52734 3.49609 2.75781 4.44922 2.75781C5.39844 2.75781 6.16797 3.52734 6.16797 4.47656C6.16797 5.42188 5.39844 6.19531 4.44922 6.19531ZM17.043 17.043H14.0781V12.4023C14.0781 11.2969 14.0586 9.87109 12.5352 9.87109C10.9922 9.87109 10.7578 11.0781 10.7578 12.3242V17.043H7.79688V7.49609H10.6406V8.80078H10.6797C11.0742 8.05078 12.043 7.25781 13.4844 7.25781C16.4883 7.25781 17.043 9.23438 17.043 11.8047V17.043Z" fill="#0077B5"/>
              </svg>
              LinkedIn
            </button>
          </div>
        </div>

        {%- comment %-%} Divider {%- endcomment -%}
        <div class="customer-register__divider">
          <span class="customer-register__divider-text">Or sign up with</span>
        </div>

        {%- comment %-%} Tab Selection {%- endcomment -%}
        <div class="customer-register__tabs">
          <button type="button" class="customer-register__tab customer-register__tab--active" data-tab="email">
            Email & Password
          </button>
          <button type="button" class="customer-register__tab" data-tab="passwordless">
            Passwordless
          </button>
        </div>

        {%- comment %-%} Email & Password Form {%- endcomment -%}
        <div class="customer-register__form-content customer-register__form-content--active" data-tab-content="email">
          {% form 'create_customer' %}
            {{ form.errors | default_errors }}
            
            <div class="customer-register__form-grid">
              <div class="customer-register__field">
                <label for="FirstName" class="customer-register__label">First Name</label>
                <div class="customer-register__input-wrapper">
                  <svg class="customer-register__input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                  </svg>
                  <input
                    type="text"
                    name="customer[first_name]"
                    id="FirstName"
                    placeholder="John"
                    autocomplete="given-name"
                    class="customer-register__input"
                    required
                  >
                </div>
              </div>

              <div class="customer-register__field">
                <label for="LastName" class="customer-register__label">Last Name</label>
                <div class="customer-register__input-wrapper">
                  <svg class="customer-register__input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                  </svg>
                  <input
                    type="text"
                    name="customer[last_name]"
                    id="LastName"
                    placeholder="Doe"
                    autocomplete="family-name"
                    class="customer-register__input"
                    required
                  >
                </div>
              </div>
            </div>

            <div class="customer-register__field">
              <label for="RegisterEmail" class="customer-register__label">Business Email</label>
              <div class="customer-register__input-wrapper">
                <svg class="customer-register__input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                <input
                  type="email"
                  name="customer[email]"
                  id="RegisterEmail"
                  placeholder="john@company.com"
                  autocomplete="email"
                  class="customer-register__input"
                  required
                >
              </div>
            </div>

            <div class="customer-register__field">
              <label for="RegisterPassword" class="customer-register__label">Password</label>
              <div class="customer-register__input-wrapper">
                <svg class="customer-register__input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
                <input
                  type="password"
                  name="customer[password]"
                  id="RegisterPassword"
                  placeholder="••••••••"
                  class="customer-register__input customer-register__input--password"
                  required
                >
                <button type="button" class="customer-register__password-toggle" data-target="RegisterPassword">
                  <svg class="customer-register__eye-icon customer-register__eye-icon--hide" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                  </svg>
                  <svg class="customer-register__eye-icon customer-register__eye-icon--show" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                  </svg>
                </button>
              </div>
            </div>

            <div class="customer-register__field">
              <label for="RegisterPasswordConfirm" class="customer-register__label">Confirm Password</label>
              <div class="customer-register__input-wrapper">
                <svg class="customer-register__input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
                <input
                  type="password"
                  name="customer[password_confirmation]"
                  id="RegisterPasswordConfirm"
                  placeholder="••••••••"
                  class="customer-register__input customer-register__input--password"
                  required
                >
                <button type="button" class="customer-register__password-toggle" data-target="RegisterPasswordConfirm">
                  <svg class="customer-register__eye-icon customer-register__eye-icon--hide" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                  </svg>
                  <svg class="customer-register__eye-icon customer-register__eye-icon--show" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                  </svg>
                </button>
              </div>
              <p class="customer-register__hint">Must be at least 8 characters</p>
            </div>

            <div class="customer-register__checkboxes">
              <div class="customer-register__checkbox-wrapper">
                <input type="checkbox" id="AcceptTerms" name="customer[note][terms_accepted]" class="customer-register__checkbox" required>
                <label for="AcceptTerms" class="customer-register__checkbox-label">
                  I agree to the 
                  <a href="/pages/terms" class="customer-register__link">Terms of Service</a> 
                  and 
                  <a href="/pages/privacy" class="customer-register__link">Privacy Policy</a>
                </label>
              </div>

              <div class="customer-register__checkbox-wrapper">
                <input type="checkbox" id="MarketingEmails" name="customer[accepts_marketing]" class="customer-register__checkbox">
                <label for="MarketingEmails" class="customer-register__checkbox-label">
                  Send me promotional emails and product updates (GDPR compliant)
                </label>
              </div>
            </div>

            <button type="submit" class="customer-register__submit">
              Create Account
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </button>
          {% endform %}
        </div>

        {%- comment %-%} Passwordless Form {%- endcomment -%}
        <div class="customer-register__form-content customer-register__form-content--passwordless" data-tab-content="passwordless">
          <div class="customer-register__passwordless-info">
            <p>
              We'll send you a secure link to create your account without a password. 
              Simply click the link in your email to get started.
            </p>
          </div>

          <form class="customer-register__passwordless-form">
            <div class="customer-register__field">
              <label for="PasswordlessEmail" class="customer-register__label">Business Email</label>
              <div class="customer-register__input-wrapper">
                <svg class="customer-register__input-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                <input
                  type="email"
                  id="PasswordlessEmail"
                  placeholder="john@company.com"
                  class="customer-register__input"
                  required
                >
              </div>
            </div>

            <div class="customer-register__checkbox-wrapper">
              <input type="checkbox" id="PasswordlessTerms" class="customer-register__checkbox" required>
              <label for="PasswordlessTerms" class="customer-register__checkbox-label">
                I agree to the 
                <a href="/pages/terms" class="customer-register__link">Terms of Service</a> 
                and 
                <a href="/pages/privacy" class="customer-register__link">Privacy Policy</a>
              </label>
            </div>

            <button type="submit" class="customer-register__submit">
              Send Magic Link
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
            </button>
          </form>
        </div>
      </div>

      {%- comment %-%} Right Side - Value Propositions {%- endcomment -%}
      <div class="customer-register__value-props">
        <div class="customer-register__value-props-header">
          <h2 class="customer-register__value-props-title">Why Join {{ shop.name }}?</h2>
          <p class="customer-register__value-props-subtitle">
            {{ section.settings.value_props_description }}
          </p>
        </div>

        <div class="customer-register__value-props-list">
          {% for i in (1..3) %}
            {% assign title_key = 'value_prop_' | append: i | append: '_title' %}
            {% assign desc_key = 'value_prop_' | append: i | append: '_description' %}
            {% assign icon_key = 'value_prop_' | append: i | append: '_icon' %}
            
            <div class="customer-register__value-prop-card">
              <div class="customer-register__value-prop-icon">
                {% case section.settings[icon_key] %}
                  {% when 'package' %}
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                    </svg>
                  {% when 'shield' %}
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                  {% when 'headphones' %}
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                    </svg>
                {% endcase %}
              </div>
              <div class="customer-register__value-prop-content">
                <h3 class="customer-register__value-prop-title">{{ section.settings[title_key] }}</h3>
                <p class="customer-register__value-prop-description">{{ section.settings[desc_key] }}</p>
              </div>
            </div>
          {% endfor %}
        </div>

        <div class="customer-register__trust-badges">
          <div class="customer-register__trust-badge">
            <svg class="customer-register__trust-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <p class="customer-register__trust-text">
              <span class="customer-register__trust-highlight">Trusted by 10,000+ businesses</span> - 
              Lorem ipsum dolor sit amet consectetur adipiscing elit
            </p>
          </div>
          <div class="customer-register__trust-badge">
            <svg class="customer-register__trust-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            <p class="customer-register__trust-text">
              <span class="customer-register__trust-highlight">GDPR Compliant</span> - 
              Ut enim ad minim veniam quis nostrud exercitation
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  {%- comment %-%} Footer {%- endcomment -%}
  <footer class="customer-register__footer">
    <div class="customer-register__footer-inner">
      <p class="customer-register__footer-copyright">
        © {{ 'now' | date: '%Y' }} {{ shop.name }}. All rights reserved.
      </p>
      <div class="customer-register__footer-links">
        <a href="/pages/privacy" class="customer-register__footer-link">Privacy Policy</a>
        <a href="/pages/terms" class="customer-register__footer-link">Terms of Service</a>
        <a href="/pages/contact" class="customer-register__footer-link">Contact Support</a>
      </div>
    </div>
  </footer>
</div>

<script>
  // Tab switching functionality
  document.querySelectorAll('.customer-register__tab').forEach(tab => {
    tab.addEventListener('click', function() {
      const targetTab = this.dataset.tab;
      
      // Update tab buttons
      document.querySelectorAll('.customer-register__tab').forEach(t => {
        t.classList.remove('customer-register__tab--active');
      });
      this.classList.add('customer-register__tab--active');
      
      // Update content
      document.querySelectorAll('.customer-register__form-content').forEach(content => {
        content.classList.remove('customer-register__form-content--active');
      });
      document.querySelector(`[data-tab-content="${targetTab}"]`).classList.add('customer-register__form-content--active');
    });
  });

  // Password toggle functionality
  document.querySelectorAll('.customer-register__password-toggle').forEach(toggle => {
    toggle.addEventListener('click', function() {
      const targetId = this.dataset.target;
      const input = document.getElementById(targetId);
      
      if (input.type === 'password') {
        input.type = 'text';
        this.classList.add('customer-register__password-toggle--active');
      } else {
        input.type = 'password';
        this.classList.remove('customer-register__password-toggle--active');
      }
    });
  });
</script>

{% schema %}
{
  "name": "Customer Register",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "textarea",
      "id": "value_props_description",
      "label": "Value Propositions Description",
      "default": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    },
    {
      "type": "header",
      "content": "Value Proposition 1"
    },
    {
      "type": "select",
      "id": "value_prop_1_icon",
      "label": "Icon",
      "options": [
        { "value": "package", "label": "Package" },
        { "value": "shield", "label": "Shield" },
        { "value": "headphones", "label": "Headphones" }
      ],
      "default": "package"
    },
    {
      "type": "text",
      "id": "value_prop_1_title",
      "label": "Title",
      "default": "Exclusive B2B Pricing"
    },
    {
      "type": "textarea",
      "id": "value_prop_1_description",
      "label": "Description",
      "default": "Lorem ipsum dolor sit amet consectetur adipiscing"
    },
    {
      "type": "header",
      "content": "Value Proposition 2"
    },
    {
      "type": "select",
      "id": "value_prop_2_icon",
      "label": "Icon",
      "options": [
        { "value": "package", "label": "Package" },
        { "value": "shield", "label": "Shield" },
        { "value": "headphones", "label": "Headphones" }
      ],
      "default": "shield"
    },
    {
      "type": "text",
      "id": "value_prop_2_title",
      "label": "Title",
      "default": "Simplified Procurement"
    },
    {
      "type": "textarea",
      "id": "value_prop_2_description",
      "label": "Description",
      "default": "Ut enim ad minim veniam quis nostrud exercitation"
    },
    {
      "type": "header",
      "content": "Value Proposition 3"
    },
    {
      "type": "select",
      "id": "value_prop_3_icon",
      "label": "Icon",
      "options": [
        { "value": "package", "label": "Package" },
        { "value": "shield", "label": "Shield" },
        { "value": "headphones", "label": "Headphones" }
      ],
      "default": "headphones"
    },
    {
      "type": "text",
      "id": "value_prop_3_title",
      "label": "Title",
      "default": "Dedicated Support"
    },
    {
      "type": "textarea",
      "id": "value_prop_3_description",
      "label": "Description",
      "default": "Duis aute irure dolor in reprehenderit voluptate"
    }
  ]
}
{% endschema %}
