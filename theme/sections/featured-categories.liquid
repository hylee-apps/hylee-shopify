{% comment %}
  Featured Categories Section
  Customizable in theme editor
{% endcomment %}

<section class="featured-categories" id="categories-{{ section.id }}">
  <div class="featured-categories__container">
    <div class="featured-categories__header">
      <div class="featured-categories__header-text">
        {% if section.settings.heading != blank %}
          <h3 class="featured-categories__heading">{{ section.settings.heading }}</h3>
        {% endif %}
        {% if section.settings.description != blank %}
          <p class="featured-categories__description">{{ section.settings.description }}</p>
        {% endif %}
      </div>
      {% if section.settings.show_view_all %}
        <a href="{{ section.settings.view_all_link | default: '/collections' }}" class="featured-categories__view-all">
          {{ section.settings.view_all_text | default: 'View All' }}
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="m9 18 6-6-6-6"/>
          </svg>
        </a>
      {% endif %}
    </div>

    <div class="featured-categories__grid">
      {% for block in section.blocks %}
        {% if block.type == 'category' %}
          <a 
            href="{{ block.settings.link | default: '/collections/all' }}" 
            class="featured-categories__item"
            {{ block.shopify_attributes }}
          >
            {% if block.settings.image != blank %}
              <div class="featured-categories__item-bg">
                {{ block.settings.image | image_url: width: 400 | image_tag: loading: 'lazy', alt: block.settings.title }}
              </div>
            {% endif %}
            
            <div class="featured-categories__item-content">
              {% if block.settings.icon != blank %}
                <div class="featured-categories__item-icon">{{ block.settings.icon }}</div>
              {% endif %}
              
              {% if block.settings.title != blank %}
                <div class="featured-categories__item-title">{{ block.settings.title }}</div>
              {% endif %}
              
              {% if block.settings.count != blank %}
                <div class="featured-categories__item-count">{{ block.settings.count }}</div>
              {% endif %}
            </div>
          </a>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<style>
#categories-{{ section.id }} {
  padding: 4rem 1.5rem;
  background: {{ section.settings.background_color | default: '#ffffff' }};
}

#categories-{{ section.id }} .featured-categories__container {
  max-width: 1280px;
  margin: 0 auto;
}

#categories-{{ section.id }} .featured-categories__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 2rem;
  gap: 1rem;
}

#categories-{{ section.id }} .featured-categories__header-text {
  flex: 1;
}

#categories-{{ section.id }} .featured-categories__heading {
  margin: 0 0 0.5rem 0;
  font-size: 1.5rem;
  font-weight: 600;
  color: {{ section.settings.heading_color | default: '#0f172a' }};
  line-height: 1.3;
}

#categories-{{ section.id }} .featured-categories__description {
  margin: 0;
  font-size: 1rem;
  color: {{ section.settings.description_color | default: '#64748b' }};
  line-height: 1.5;
}

#categories-{{ section.id }} .featured-categories__view-all {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  color: #2563eb;
  font-size: 0.875rem;
  font-weight: 500;
  text-decoration: none;
  transition: color 0.2s;
  white-space: nowrap;
}

#categories-{{ section.id }} .featured-categories__view-all:hover {
  color: #1d4ed8;
}

#categories-{{ section.id }} .featured-categories__grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
}

@media (min-width: 768px) {
  #categories-{{ section.id }} .featured-categories__grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (min-width: 1024px) {
  #categories-{{ section.id }} .featured-categories__grid {
    grid-template-columns: repeat(6, 1fr);
  }
}

#categories-{{ section.id }} .featured-categories__item {
  position: relative;
  display: block;
  overflow: hidden;
  border-radius: 0.75rem;
  background: #ffffff;
  border: 1px solid #e2e8f0;
  padding: 1.5rem;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s;
}

#categories-{{ section.id }} .featured-categories__item:hover {
  border-color: #bfdbfe;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  transform: translateY(-2px);
}

#categories-{{ section.id }} .featured-categories__item-bg {
  position: absolute;
  inset: 0;
  opacity: 0;
  transition: opacity 0.2s;
  z-index: 0;
}

#categories-{{ section.id }} .featured-categories__item-bg img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

#categories-{{ section.id }} .featured-categories__item:hover .featured-categories__item-bg {
  opacity: 0.1;
}

#categories-{{ section.id }} .featured-categories__item-content {
  position: relative;
  z-index: 1;
}

#categories-{{ section.id }} .featured-categories__item-icon {
  font-size: 2.25rem;
  line-height: 1;
  margin-bottom: 0.75rem;
}

#categories-{{ section.id }} .featured-categories__item-title {
  font-size: 0.875rem;
  font-weight: 500;
  color: #0f172a;
  margin-bottom: 0.25rem;
  line-height: 1.4;
}

#categories-{{ section.id }} .featured-categories__item-count {
  font-size: 0.75rem;
  color: #64748b;
  line-height: 1.4;
}

@media (max-width: 767px) {
  #categories-{{ section.id }} {
    padding: 3rem 1rem;
  }
  
  #categories-{{ section.id }} .featured-categories__heading {
    font-size: 1.25rem;
  }
  
  #categories-{{ section.id }} .featured-categories__description {
    font-size: 0.875rem;
  }
}
</style>

{% schema %}
{
  "name": "Featured Categories",
  "max_blocks": 12,
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (Emoji)",
          "default": "üì±",
          "info": "Use an emoji as the category icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Category Name",
          "default": "Category Name"
        },
        {
          "type": "text",
          "id": "count",
          "label": "Item Count",
          "default": "2,450+ items",
          "info": "Display text for number of items"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Category Link"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Background Image (optional)",
          "info": "Shows on hover with 10% opacity"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Categories"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Explore our most popular product categories"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show View All Link",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_text",
      "label": "View All Text",
      "default": "View All"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View All Link"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#0f172a"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description Color",
      "default": "#64748b"
    }
  ],
  "presets": [
    {
      "name": "Featured Categories",
      "blocks": [
        {
          "type": "category",
          "settings": {
            "icon": "üì±",
            "title": "Lorem Ipsum",
            "count": "2,450+ items"
          }
        },
        {
          "type": "category",
          "settings": {
            "icon": "üëî",
            "title": "Dolor Sit",
            "count": "3,200+ items"
          }
        },
        {
          "type": "category",
          "settings": {
            "icon": "üè†",
            "title": "Amet Consectetur",
            "count": "1,800+ items"
          }
        },
        {
          "type": "category",
          "settings": {
            "icon": "‚öΩ",
            "title": "Adipiscing Elit",
            "count": "1,500+ items"
          }
        },
        {
          "type": "category",
          "settings": {
            "icon": "üíÑ",
            "title": "Sed Do Eiusmod",
            "count": "2,100+ items"
          }
        },
        {
          "type": "category",
          "settings": {
            "icon": "üîç",
            "title": "Tempor Incididunt",
            "count": "980+ items"
          }
        }
      ]
    }
  ]
}
{% endschema %}
