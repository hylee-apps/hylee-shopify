{% comment %}
  Featured Products Section
  Displays a grid of featured products using shared product-card component
{% endcomment %}

<section
  class='product-section-uniform featured-products'
  id='featured-{{ section.id }}'
  style='padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px; background-color: {{ section.settings.background_color }};'
>
  <div class='product-section-uniform__container'>
    {% if section.settings.heading != blank %}
      <div class='featured-products__header'>
        <h2 class='featured-products__title' style='color: {{ section.settings.heading_color }};'>
          {{ section.settings.heading }}
        </h2>
        {% if section.settings.description != blank %}
          <p class='featured-products__description'>{{ section.settings.description }}</p>
        {% endif %}
      </div>
    {% endif %}

    {% assign collection = collections[section.settings.collection] %}

    {% if collection and collection.products.size > 0 %}
      <div class='product-grid-uniform'>
        {% for product in collection.products limit: section.settings.products_to_show %}
          {% render 'product-card',
            product: product,
            show_vendor: false,
            show_quick_add: true,
            show_rating: true,
            show_secondary_image: true,
            show_discount_percentage: true
          %}
        {% endfor %}
      </div>

      {% if section.settings.show_view_all and collection.url %}
        <div class='featured-products__footer'>
          {% render 'button',
            text: section.settings.button_label,
            url: collection.url,
            variant: 'outline',
            size: 'lg'
          %}
        </div>
      {% endif %}

    {% else %}
      <div class='featured-products__empty'>
        <p>No products found. Please select a collection.</p>
      </div>
    {% endif %}
  </div>
</section>

<style>
  #featured-{{ section.id }} .featured-products__header {
    text-align: center;
    margin-bottom: 3rem;
  }

  #featured-{{ section.id }} .featured-products__title {
    margin: 0 0 1rem 0;
    font-size: 2.5rem;
    font-weight: 700;
  }

  @media (max-width: 768px) {
    #featured-{{ section.id }} .featured-products__title {
      font-size: 2rem;
    }
  }

  #featured-{{ section.id }} .featured-products__description {
    margin: 0;
    font-size: 1.125rem;
    color: rgb(100, 116, 139);
  }

  #featured-{{ section.id }} .featured-products__footer {
    text-align: center;
    margin-top: 3rem;
  }

  #featured-{{ section.id }} .featured-products__empty {
    text-align: center;
    padding: 4rem 2rem;
    color: rgb(100, 116, 139);
  }
</style>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Products"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#0f172a"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Discover our most popular items"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "label": "Products to Show",
      "default": 8
    },
    {
      "type": "range",
      "id": "products_per_row",
      "min": 2,
      "max": 5,
      "step": 1,
      "label": "Products per Row",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "Show Vendor",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_quick_view",
      "label": "Show Quick View",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View All' Button",
      "default": true
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "View All Products"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top",
      "default": 64
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 64
    }
  ],
  "presets": [
    {
      "name": "Featured Products"
    }
  ]
}
{% endschema %}
